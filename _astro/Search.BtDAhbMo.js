import{o as se,a as ie,I as H,r as F,i as oe,b as K,h as ce}from"./Icon.BFFksNcN.js";import{y as de,z as fe,A as D,x as M,B as ue,C as ve,j as g,o as j,D as he,H as pe,E as U,F as V,G as L,I as me,J as ee,K as ae,L as _e,M as Y,N as te,O as W,P as be,m as B,Q as X,R as ge,S as xe,T as we,U as ye,V as ke,W as Ee,X as Ie,Y as Te,Z as Ae,p as Re,l as q,n as Se,f as re,_ as Me,t as z,e as G,a as J,b as Ce,s as R,c as S,r as I,i as N,k as Le}from"./render.wgHZMHYF.js";import{b as Q}from"./input.CHM3L1vJ.js";import{I as Ne}from"./zh_TW.DaIxs4xR.js";import{u as Z}from"./url-utils.BYSdqbtf.js";/* empty css                        */function He(i,e){return e}function Be(i,e,a,o){for(var f=[],u=e.length,d=0;d<u;d++)we(e[d].e,f,!0);var b=u>0&&f.length===0&&a!==null;if(b){var p=a.parentNode;ye(p),p.append(a),o.clear(),T(i,e[0].prev,e[u-1].next)}ke(f,()=>{for(var v=0;v<u;v++){var t=e[v];b||(o.delete(t.k),T(i,t.prev,t.next)),Ee(t.e,!b)}})}function Pe(i,e,a,o,f,u=null){var d=i,b={flags:e,items:new Map,first:null};{var p=i;d=M?D(ue(p)):p.appendChild(de())}M&&ve();var v=null,t=!1,m=j(()=>{var r=a();return ge(r)?r:r==null?[]:te(r)});fe(()=>{var r=g(m),s=r.length;if(t&&s===0)return;t=s===0;let l=!1;if(M){var E=he(d)===pe;E!==(s===0)&&(d=U(),D(d),V(!1),l=!0)}if(M){for(var w=null,n,_=0;_<s;_++){if(L.nodeType===8&&L.data===me){d=L,l=!0,V(!1);break}var A=r[_],y=o(A,_);n=le(L,b,w,null,A,y,_,f,e,a),b.items.set(y,n),w=n}s>0&&D(U())}M||De(r,b,d,f,e,o,a),u!==null&&(s===0?v?ee(v):v=ae(()=>u(d)):v!==null&&_e(v,()=>{v=null})),l&&V(!0),g(m)}),M&&(d=L)}function De(i,e,a,o,f,u,d){var b=i.length,p=e.items,v=e.first,t=v,m,r=null,s=[],l=[],E,w,n,_;for(_=0;_<b;_+=1){if(E=i[_],w=u(E,_),n=p.get(w),n===void 0){var A=t?t.e.nodes_start:a;r=le(A,e,r,r===null?e.first:r.next,E,w,_,o,f,d),p.set(w,r),s=[],l=[],t=r.next;continue}if(Ve(n,E,_),(n.e.f&Y)!==0&&ee(n.e),n!==t){if(m!==void 0&&m.has(n)){if(s.length<l.length){var y=l[0],c;r=y.prev;var x=s[0],h=s[s.length-1];for(c=0;c<s.length;c+=1)$(s[c],y,a);for(c=0;c<l.length;c+=1)m.delete(l[c]);T(e,x.prev,h.next),T(e,r,x),T(e,h,y),t=y,r=h,_-=1,s=[],l=[]}else m.delete(n),$(n,t,a),T(e,n.prev,n.next),T(e,n,r===null?e.first:r.next),T(e,r,n),r=n;continue}for(s=[],l=[];t!==null&&t.k!==w;)(t.e.f&Y)===0&&(m??=new Set).add(t),l.push(t),t=t.next;if(t===null)continue;n=t}s.push(n),r=n,t=n.next}if(t!==null||m!==void 0){for(var k=m===void 0?[]:te(m);t!==null;)(t.e.f&Y)===0&&k.push(t),t=t.next;var C=k.length;if(C>0){var P=b===0?a:null;Be(e,k,P,p)}}W.first=e.first&&e.first.e,W.last=r&&r.e}function Ve(i,e,a,o){be(i.v,e),i.i=a}function le(i,e,a,o,f,u,d,b,p,v){var t=(p&Ie)!==0,m=(p&Te)===0,r=t?m?B(f):X(f):f,s=(p&xe)===0?d:X(d),l={i:s,v:r,k:u,a:null,e:null,prev:a,next:o};try{return l.e=ae(()=>b(i,r,s,v),M),l.e.prev=a&&a.e,l.e.next=o&&o.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),o!==null&&(o.prev=l,o.e.prev=l.e),l}finally{}}function $(i,e,a){for(var o=i.next?i.next.e.nodes_start:a,f=e?e.e.nodes_start:a,u=i.e.nodes_start;u!==o;){var d=Ae(u);f.before(u),u=d}}function T(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var Ye=re(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
           rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),Oe=re(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1512dld"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1512dld"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1512dld"/></div> <div class="search-results-container overflow-y-auto overscroll-contain svelte-1512dld" style="max-height: calc(100vh - 120px);"></div></div>`,1);function ze(i,e){Re(e,!1);let a=B(""),o=B(""),f=B([]),u=!1;const d=[{url:Z("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:Z("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],b=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},p=(c,x)=>{const h=document.getElementById("search-panel");!h||!x||(c?h.classList.remove("float-panel-closed"):h.classList.add("float-panel-closed"))},v=async(c,x)=>{if(!c){p(!1,x),N(f,[]);return}try{let h=[];if(u){const k=await window.pagefind.search(c);h=await Promise.all(k.results.map(C=>C.data()))}else h=d;N(f,h),p(g(f).length>0,x)}catch(h){console.error("Search error:",h),N(f,[]),p(!1,x)}finally{}};se(async()=>{u=typeof window<"u"&&"pagefind"in window}),q(()=>g(a),()=>{v(g(a),!0)}),q(()=>g(o),()=>{v(g(o),!1)}),Se(),ie();var t=Oe(),m=Me(t),r=S(m);H(r,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var s=R(r,2);F(s),I(m);var l=R(m,2),E=S(l);H(E,{icon:"material-symbols:search",class:"text-[1.25rem]"}),I(l);var w=R(l,2),n=S(w),_=S(n);H(_,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var A=R(_,2);F(A),I(n);var y=R(n,2);Pe(y,5,()=>g(f),He,(c,x)=>{var h=Ye(),k=S(h),C=S(k,!0),P=R(C);H(P,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),I(k);var O=R(k,2),ne=S(O);ce(ne,()=>g(x).excerpt),I(O),I(h),z(()=>{K(h,"href",g(x).url),Le(C,g(x).meta.title)}),J(c,h)}),I(y),I(w),z(c=>K(s,"placeholder",c),[()=>oe(Ne.search)],j),Q(s,()=>g(a),c=>N(a,c)),G("focus",s,()=>v(g(a),!0)),G("click",l,b),Q(A,()=>g(o),c=>N(o,c)),J(i,t),Ce()}export{ze as default};
